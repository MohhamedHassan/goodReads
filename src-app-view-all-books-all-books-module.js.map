{"version":3,"sources":["./src/app/resolvers/getallbooks.resolver.ts","./src/app/view/all-books/all-books.module.ts","./src/app/view/all-books/all-books-routing.module.ts","./src/app/view/all-books/allbooks/allbooks.component.html","./src/app/view/all-books/allbooks/allbooks.component.ts"],"names":[],"mappings":"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","file":"src-app-view-all-books-all-books-module.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport {\n  Router, Resolve,\n  RouterStateSnapshot,\n  ActivatedRouteSnapshot\n} from '@angular/router';\nimport { Observable, of } from 'rxjs';\nimport { BookService } from '../services/book.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GetallbooksResolver implements Resolve<boolean> {\n  constructor(private books:BookService) {}\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): any {\n    return this.books.getAllBooks()\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AllBooksRoutingModule } from './all-books-routing.module';\nimport { AllbooksComponent } from './allbooks/allbooks.component';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { FormsModule } from '@angular/forms';\n\n\n@NgModule({\n  declarations: [\n    AllbooksComponent\n  ],\n  imports: [\n    CommonModule,\n    AllBooksRoutingModule,\n    FormsModule,\n    SharedModule\n  ]\n})\nexport class AllBooksModule { }\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { NotUserGuard } from 'src/app/guards/not-user.guard';\nimport { GetallbooksResolver } from 'src/app/resolvers/getallbooks.resolver';\nimport { AllbooksComponent } from './allbooks/allbooks.component';\n\nconst routes: Routes = [\n  {\n    path:'',\n    component:AllbooksComponent,\n    canActivate:[NotUserGuard],\n    resolve:{AllBooks:GetallbooksResolver}\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AllBooksRoutingModule { }\n","\n\n <div class=\"coverr bg-white text-center\">\n    <img src=\"assets/cover.png\"  alt=\"\" class=\"imgWidth\">\n  </div>\n<div *ngIf=\"loading\" style=\"height: 95vh;\" class=\"d-flex justify-content-center align-items-center\">\n    <div class=\"lds-ring\">\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n    </div>\n</div>\n\n<ng-template #empty>\n    <div class=\"container py-5 text-center\">\n        There are no books <a style=\"color:blue\" routerLink='/profile/addBook'>add new Book ? </a>\n    </div>\n</ng-template>\n<div class=\"userBooks py-5\" *ngIf=\"allBooks.length; else empty\">\n    <div class=\"container\">\n        <input type=\"text\" placeholder=\"search..\" class=\"form-control my-4\" [(ngModel)]=\"searchValue\">\n        <div class=\"row\">\n            <div class=\"col-md-6 mb-4\" *ngFor=\"let book of allBooks | search : searchValue;let containerIndex = index\">\n                <div class=\"row\">\n                    <div class=\"col-md-6 \">\n                        <div>\n                            <a [routerLink]='[\"/bookDetails\",book._id]'>\n\n                                <img height=\"400\" [src]=\"book.image\" class=\"w-100\" alt=\"\">\n                            </a>\n                        </div>\n                    </div>\n                    <div class=\"col-md-6 \">\n                        <div class=\"position-relative shadoww\">\n                            <h2 class=\"mt-4\">{{book.name}}</h2>\n                            <h5>BY: {{book.authorId.name}}</h5>\n                            <p> {{book.description | text}} <span [routerLink]='[\"/bookDetails\",book._id]'\n                                    style=\"cursor: pointer;\">...more</span> </p>\n                            <div class=\"my-2\">\n                                <span class=\"mr-3\">Rating:</span>\n                              <ng-container \n                              *ngFor=\"let star of stars[containerIndex][4];let rated = index;trackBy:track\">\n                                <i \n                               [style.color]=\"star ? 'orange' : '#716f6f'\"\n                               [class]=\"star == 'half' ? 'fa-star-half-alt' : 'fa-star'\"\n                                    class=\"fas \"></i>\n                              </ng-container>\n                              \n                            </div>\n                            <p> <span class=\"mr-4\">Type:</span> {{book.type}}</p>\n                            <p class=\"rateee\">{{book.rate}}</p>\n                            <div class=\"my-2 rateMe d-flex align-items-center\">\n                                <span class=\"mr-3\">Rate This Book</span>\n\n                                <div *ngIf=\"!stars[containerIndex][2].loading && !stars[containerIndex][3].message\">\n                                    <i *ngFor=\"let star of stars[containerIndex][0];let i = index;trackBy:track\"\n                                        (click)=\"ratebook(i,containerIndex,book._id)\"\n                                        (mouseover)=\"orangeOnHover(i,containerIndex)\"\n                                        (mouseleave)=\"grayOnMouseleave(i,containerIndex)\"\n                                        [style.color]=\"star ? 'orange' : '#716f6f'\" class=\"fas fa-star\"></i>\n                                     \n                                </div>\n                                <span *ngIf=\"stars[containerIndex][3].message\">thanks for rating\n\n                                </span>\n                           \n                                    <div class=\"text-center\" *ngIf=\"stars[containerIndex][2].loading\">\n                                        <div class=\"lds-ring\">\n                                            <div></div>\n                                            <div></div>\n                                            <div></div>\n                                            <div></div>\n                                        </div>\n                                    </div>\n\n                            </div>\n\n\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n        </div>\n\n\n    </div>\n</div>","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { Book } from 'src/app/interfaces/book';\nimport { BookService } from 'src/app/services/book.service';\n\n@Component({\n  selector: 'app-allbooks',\n  templateUrl: './allbooks.component.html',\n  styleUrls: ['./allbooks.component.scss']\n})\nexport class AllbooksComponent implements OnInit , OnDestroy{\n  allBooks: Book | any = []\n  stars: any = []\n  searchValue:any\n  loading:any=true\n  rateSub:Subscription|any\n  constructor(private activatedRoute: ActivatedRoute, private book: BookService,\n    private title:Title) {\n        title.setTitle('GoodReads')\n    if (this.activatedRoute.snapshot.data.AllBooks && Array.isArray(this.activatedRoute.snapshot.data.AllBooks)) {\n      this.allBooks = this.activatedRoute.snapshot.data.AllBooks\n   \n      this.loading=false\n      \n      for (let i = 0; i < this.allBooks.length; i++) {\n        this.stars.push([[false, false, false, false, false],\n        { count: -1 },\n        { loading: false },\n        { message: false },\n        [false, false, false, false, false]])\n        for (let j = 0;j < Math.floor(this.allBooks[i].rate);j++) {\n          this.stars[i][4][j]=true\n        }\n        if (this.allBooks[i].rate != Math.floor(this.allBooks[i].rate)) {\n          this.stars[i][4][Math.ceil(this.allBooks[i].rate) - 1] = \"half\"\n        }\n      }\n    } else {\n      this.loading=false\n    }\n  }\n\n  ngOnInit(): void {\n  }\n\n  orangeOnHover(i: any, containerIndex: any) {\n\n    for (let index = 0; index <= i; index++) {\n      this.stars[containerIndex][0][index] = true\n    }\n    if (i < 4) {\n      for (let index = 4; index > i; index--) {\n        this.stars[containerIndex][0][index] = false\n      }\n    }\n\n  }\n  grayOnMouseleave(i: any, containerIndex: any) {\n    if (this.stars[containerIndex][1].count > -1) {\n      for (let index = 0; index <= this.stars[containerIndex][1].count; index++) {\n        this.stars[containerIndex][0][index] = true\n      }\n    }\n    if (this.stars[containerIndex][1].count < 4) {\n      for (let index = 4; index > this.stars[containerIndex][1].count; index--) {\n        this.stars[containerIndex][0][index] = false\n      }\n\n    }\n\n\n\n\n\n\n  }\n  ratebook(i: any, containerIndex: any, BookId: any) {\n    this.stars[containerIndex][1].count = i\n    this.stars[containerIndex][2].loading = true\n   this.rateSub = this.book.rateBook(BookId, i + 1).subscribe(\n\n      res => {\n        this.stars[containerIndex][2].loading = false\n        this.stars[containerIndex][3].message = true\n        setInterval(() => {\n          this.stars[containerIndex][3].message = false\n        }, 2000)\n      },\n      err => {\n        this.stars[containerIndex][2].loading = false\n      }\n    )\n  }\n  track(index: number) {\n    return index\n  }\n  ngOnDestroy() {\n    if(this.rateSub) {\n      this.rateSub.unsubscribe()\n    }\n  }\n}\n"],"sourceRoot":"webpack:///"}