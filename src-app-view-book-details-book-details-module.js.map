{"version":3,"sources":["./src/app/view/book-details/bookdetails/bookdetails.component.html","./src/app/view/book-details/bookdetails/bookdetails.component.ts","./src/app/view/book-details/book-details-routing.module.ts","./src/app/view/book-details/book-details.module.ts"],"names":[],"mappings":"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","file":"src-app-view-book-details-book-details-module.js","sourcesContent":["\n<div *ngIf=\"pageLoading\" style=\"height: 95vh;\" class=\"d-flex justify-content-center align-items-center\">\n    <div class=\"lds-ring\">\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n    </div>\n</div>\n<div class=\"bookDetails py-5 my-5\" *ngIf=\"BookDetails\">\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"col-md-4 mb-4\">\n                <div>\n\n                    <img height=\"400\" [src]=\"BookDetails.image\"  class=\"w-100 mb-2\" alt=\"\">\n                  \n                  \n                </div>\n            </div>\n            <div class=\"col-md-8 mb-4\">\n\n                <div>          \n                    <p class=\"ratee d-inline-block\">{{BookDetails.rate}}</p>\n                    <h2>{{BookDetails.name}}</h2>\n                    <h5>BY: {{BookDetails.authorId.name}}</h5>\n                    <p> {{BookDetails.description}}</p>\n                    <div class=\"my-2\">\n                        <span class=\"mr-3\">Rating:</span>\n                      <ng-container \n                      *ngFor=\"let star of rateHistory;let rated = index;trackBy:track\">\n                        <i \n                       [style.color]=\"star ? 'orange' : '#716f6f'\"\n                       [class]=\"star == 'half' ? 'fa-star-half-alt' : 'fa-star'\"\n                            class=\"fas \"></i>\n                      </ng-container>\n                      \n                    </div>\n                    <p><span class=\"mr-3\">Type:</span> {{BookDetails.type}}</p>\n             \n                    <div class=\"my-2 rateMe d-flex align-items-center\">\n                        <span class=\"mr-3\">Rate This Book</span>\n\n                        <div *ngIf=\"!rateMe[2].loading && !rateMe[3].message\">\n                            <i *ngFor=\"let star of rateMe[0];let i = index;trackBy:track\"\n                                (click)=\"orangeOnClick(i,BookDetails._id)\"\n                                (mouseover)=\"orangeOnHover(i)\"\n                                (mouseleave)=\"grayOnMouseleave()\"\n                                [style.color]=\"star ? 'orange' : '#716f6f'\" class=\"fas fa-star\"></i>\n                             \n                        </div>\n                        <span *ngIf=\"rateMe[3].message\">thanks for rating\n\n                        </span>\n                   \n                            <div class=\"text-center\" *ngIf=\"rateMe[2].loading\">\n                                <div class=\"lds-ring\">\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                    <div></div>\n                                </div>\n                            </div>\n\n                    </div>\n                </div>\n            </div>\n        </div>\n   \n        \n    </div>\n</div>","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { BookService } from 'src/app/services/book.service';\n\n@Component({\n  selector: 'app-bookdetails',\n  templateUrl: './bookdetails.component.html',\n  styleUrls: ['./bookdetails.component.scss']\n})\nexport class BookdetailsComponent implements OnInit, OnDestroy {\nBookDetails:any\nrateHistory:any=[]\ndataSub:Subscription|any\nbookSub:Subscription|any\nrateSub:Subscription|any\npageLoading:any=true\nrateMe:any=[[false,false,false,false,false],{count:-1},{loading:false},\n{message:false},]\n\n  constructor(\n    private title:Title,private activatedRoute:ActivatedRoute,private bookservice:BookService) { \n    this.rateHistory=[false,false,false,false,false]\n   this.dataSub =  this.activatedRoute.params.subscribe(param => {\n    this.bookSub =    this.bookservice.getBookById(param.id).subscribe((res:any) => {\n            \n             this.pageLoading=false\n             this.BookDetails = res\n             title.setTitle( `${res.name}`)\n             for (let j = 0;j < Math.floor(this.BookDetails.rate);j++) {\n              this.rateHistory[j]=true\n            }\n            if (this.BookDetails.rate != Math.floor(this.BookDetails.rate)) {\n              this.rateHistory[Math.ceil(this.BookDetails.rate) - 1] = \"half\"\n            }\n        }, err => {\n          this.pageLoading=false\n         alert(err.errors.error)\n        } )\n    })\n  }\n  ngOnInit(): void {\n  }\n  orangeOnHover(i:any) {\n\n    for (let index = 0 ; index <= i; index++) {\n      this.rateMe[0][index]=true\n   }\n  if(i<4) {\n    for (let index = 4 ; index > i; index--) {\n      this.rateMe[0][index]=false\n    }\n  }\n  \n  }\n  grayOnMouseleave() {\n   if(this.rateMe[1].count>-1) {\n    for (let index = 0 ; index <= this.rateMe[1].count; index++) {\n      this.rateMe[0][index]=true\n    }\n   }\n    if(this.rateMe[1].count<4) {\n      for (let index = 4 ; index > this.rateMe[1].count; index--) {\n       this.rateMe[0][index]=false\n      }\n   \n    }\n    \n    \n  \n  \n  \n  \n  }\n  orangeOnClick(i:any,BookId:any) {\n   this.rateMe[1].count=i\n   this.rateMe[2].loading = true\nthis.rateSub =     this.bookservice.rateBook(BookId,i+1).subscribe(\n        \n       res => {\n        this.rateMe[2].loading = false\n        this.rateMe[3].message = true\n        setInterval(() => {\n         this.rateMe[3].message = false\n        },2000)\n       },\n       err => {\n        this.rateMe[2].loading = false\n       }\n     )\n  }\n  track(index:number) {\n    return index\n  }\n  ngOnDestroy() {\n    if(this.dataSub) {\n      this.dataSub.unsubscribe()\n    }\n    if(this.bookSub) {\n      this.bookSub.unsubscribe()\n    }\n    if(this.rateSub) {\n      this.rateSub.unsubscribe()\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { NotUserGuard } from 'src/app/guards/not-user.guard';\nimport { BookdetailsComponent } from './bookdetails/bookdetails.component';\n\nconst routes: Routes = [\n  {\n    path:'',\n    component:BookdetailsComponent,\n    canActivate:[NotUserGuard],\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class BookDetailsRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { BookDetailsRoutingModule } from './book-details-routing.module';\nimport { BookdetailsComponent } from './bookdetails/bookdetails.component';\n\n\n@NgModule({\n  declarations: [\n    BookdetailsComponent\n  ],\n  imports: [\n    CommonModule,\n    BookDetailsRoutingModule\n  ]\n})\nexport class BookDetailsModule { }\n"],"sourceRoot":"webpack:///"}